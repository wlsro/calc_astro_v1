---
const images = [
    "/main_page/1.jpg",
    "/main_page/2.jpg",
    "/main_page/3.jpg",
    "/main_page/4.jpg",
];
---

<div
    class="relative group w-full h-[400px] md:h-[500px] rounded-xl overflow-hidden"
>
    <!-- Slider Container -->
    <div
        id="slider"
        class="flex w-full h-full overflow-x-auto snap-x snap-mandatory scroll-smooth scrollbar-hide"
    >
        {
            images.map((src, index) => (
                <div class="flex-none w-full h-full snap-center relative">
                    <img
                        src={src}
                        alt={`Slide ${index + 1}`}
                        class="w-full h-full object-cover"
                    />
                </div>
            ))
        }
    </div>

    <!-- Navigation Arrows -->
    <button
        id="prevBtn"
        class="absolute left-4 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 p-3 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-lg focus:outline-none"
        aria-label="Previous slide"
    >
        <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            ><path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M15 19l-7-7 7-7"></path></svg
        >
    </button>

    <button
        id="nextBtn"
        class="absolute right-4 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 p-3 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-lg focus:outline-none"
        aria-label="Next slide"
    >
        <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            ><path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5l7 7-7 7"></path></svg
        >
    </button>
</div>

<script>
    const slider = document.getElementById("slider");
    const prevBtn = document.getElementById("prevBtn");
    const nextBtn = document.getElementById("nextBtn");

    let autoScrollInterval: number | undefined;

    const scrollNext = () => {
        if (!slider) return;
        // Check if we are at the end
        if (slider.scrollLeft + slider.clientWidth >= slider.scrollWidth - 10) {
            slider.scrollTo({ left: 0, behavior: "smooth" }); // Loop back to start
        } else {
            slider.scrollBy({ left: slider.clientWidth, behavior: "smooth" });
        }
    };

    const scrollPrev = () => {
        if (!slider) return;
        // Check if we are at the start
        if (slider.scrollLeft <= 10) {
            slider.scrollTo({ left: slider.scrollWidth, behavior: "smooth" }); // Loop to end
        } else {
            slider.scrollBy({ left: -slider.clientWidth, behavior: "smooth" });
        }
    };

    const startAutoScroll = () => {
        stopAutoScroll(); // Prevent multiple intervals
        autoScrollInterval = window.setInterval(scrollNext, 4000); // 4 seconds
    };

    const stopAutoScroll = () => {
        if (autoScrollInterval) clearInterval(autoScrollInterval);
    };

    // Event Listeners
    nextBtn?.addEventListener("click", () => {
        scrollNext();
        startAutoScroll(); // Reset timer
    });

    prevBtn?.addEventListener("click", () => {
        scrollPrev();
        startAutoScroll(); // Reset timer
    });

    // Pause on hover
    if (slider) {
        slider.addEventListener("mouseenter", stopAutoScroll);
        slider.addEventListener("mouseleave", startAutoScroll);
    }

    // Initial Start
    startAutoScroll();
</script>

<style>
    /* Hide scrollbar for Chrome, Safari and Opera */
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* Hide scrollbar for IE, Edge and Firefox */
    .scrollbar-hide {
        -ms-overflow-style: none; /* IE and Edge */
        scrollbar-width: none; /* Firefox */
    }
</style>
